---
layout: post
title:  "Spring 시작"
date:   2020-01-08
excerpt: ""
tag:
- spring
- practice
comments: true
---

# 스프링 프레임워크 특징
* 자바 엔터프라이즈 개발을 편하게 해주는 오픈소스 경량 프레임워크입니다.
* DI(Dependency Injection)을 지원해 각각의 계층이나 서비스간의 의존성을 프레임워크가 연결시켜 줍니다.
* IoC(Inversion of Contorl) 기술을 통해 애플리케이션의 느슨한 결합 유지해 줍니다.
* AOP(Aspect-Oriented Programming) 관점지향 프로그래밍을 지원해 트랜잭션, 보안 등 여러 모듈에서 공통적으로 사용하는 기능을 분리하여 관리할수 있습니다.

- - - - - - -

### 1. DI
![program](/photo/spring/20-01-08_program.PNG)  

위 소스의 `InlineExamConsole(exam)`와 `GridExamConsole(exam)`부분이 DI에 해당되는데 해당되는 객체를 새로이 생성하면서 exam 객체를 조립해주고 있는 부분입니다.
이를 스프링 프레임워크를 활용하여 생성할수 있습니다.    


#### 지시문을 이용한 DI
-----------
![di_spring](/photo/spring/20-01-08_di_spring.PNG)  

스프링 프레임워크는 xml의 지시문을 이용해서 객체를 관리할수 있습니다.  
여기서 id는 객체의 이름, class는 객체의 클래스가있는 경로를 의미하며 p:태그는 클래스의 속성에 값을 명명할수 있습니다.  
또한 `<property>`를 이용하여 함수를 호출할수 있는데, 묵시적으로 setter는 set을제외하고 첫 이름을 소문자로 명명하여 지정합니다.    

#### 객체의 사용
![di_program](/photo/spring/20-01-08_di_program.PNG)  

이제 메인에서 ApplicationContext 활용해 IoC컨테이너를 만들수 있습니다.    

#### Collection 객체의 생성
![collection1](/photo/spring/20-01-09_collection1.PNG) 
![collection2](/photo/spring/20-01-09_collection3.PNG) 
![collection3](/photo/spring/20-01-09_collection4.PNG)  

Collection 객체에 객체를 추가 즉 .add부분을 위 그림과같이 지시문에 <construtior-arg> 생성자의 <list> 로 감싸 bean객체를 직접 만들어 넣을수 있고, <ref>로 위에서 명명한 빈을 참조해서 생성할수 있습니다  

![collection6](/photo/spring/20-01-09_collection6.PNG)  

util:list를 활용해 리스트 객체를 직접 생성하여 적용하는 방법도 있습니다..


#### Annotation
* @Autowired
![autowired1](/photo/spring/20-01-09_Autowired1.PNG) 
![autowired2](/photo/spring/20-01-09_Autowired2.PNG) 

이번에는 위 그림에서의 각각의 객체를 DI시키는 `<property name="exam" ref="exam"></property>` 부분을 편하게 코드에서 `@Autowired`에 관련한 내용입니다. 스프링은 DI 지원을위해 다양한 어노태이션을 지원해 주는데 `@Autowired`는 그중 하나입니다. 자동으로 태그가붙은 객체를 찾아 DI를 시켜줌으로서 사용자가 작성해야하는 코드의 수를 줄여줍니다.  


![autowired3](/photo/spring/20-01-09_Autowired4.PNG) 
![autowired4](/photo/spring/20-01-09_Autowired5.PNG)  
![autowired4](/photo/spring/20-01-09_Autowired6.PNG)  
![autowired4](/photo/spring/20-01-09_Autowired7.PNG) 

Autowired은 클래스의 속성, setter, 생성자에 적용할수 있습니다.
또한 Autowired은 같은 인터페이스의 빈이 존재할시 에러가 발생하게 되는데, 이를 해결해기위해 `@Qualifier` 어노태이션을 활용해 인젝션할 빈 객체의 id를 직접 지정해 줄수도 있습니다.
오버라이드 된 생성자에 Qulifier를 사용할시, 오버라이드 된 생성자는 여러개의 인자를 가질수 있기 때문에 각각 인자에 Qulifier를 적용해 주어야 합니다.  
Autowired는 속성으로 required를 사용해 생성된 객체의 초기값을 null값으로 줄수도 있습니다.  

![component](/photo/spring/20-01-10_value.PNG)  

XML 파일에서 객체를 생성하는 것이아닌 애노테이션으로 객체를 형성할수 있습니다. 클래스위에 `@component` 애노태이션을 붙이면, 그 클래스를 객체로 만들어 줍니다.   `<context:component-scan base-package="spring.di.ui, spring.di.entity"></context:component-scan>`  
위의 코드를 xml파일에 추가하면 패키지를 참조해서 @Component가 붙은 클래스를 객체로 만들어 줍니다. 이렇게 형성한 객체는 @Value 태그를 통해 속성을 초기화해줄수 있습니다.


   












